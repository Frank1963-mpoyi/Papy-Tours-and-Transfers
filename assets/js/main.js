
// ====== TRANSLATIONS ======
const translations = {
    en: {
        language_name: "English",
        home: "Home",
        about: "About Us",
        tours: "Tours",
        testimonials: "Testimonials",
    
        hero_title: "Experience Cape Town Like Never Before",
        hero_subtitle: "Discover the Mother City with passionate local guides and create unforgettable memories",
        explore_tours: "Explore Tours",
        book_now: "Book Now",
        about_title: "About Cape Town Adventures",
        about_subtitle: "Your local experts in Cape Town tourism",
        our_story: "Our Story",
        story_text: "Founded by passionate locals in 2015, Cape Town Adventures was born from a desire to share the beauty and diversity of our incredible city with the world. We believe in sustainable tourism that benefits both visitors and local communities.",
        story_text2: "With over 8 years of experience, our team of certified guides knows every corner of Cape Town - from the iconic Table Mountain to hidden gems only locals know about. We're committed to creating personalized experiences that go beyond the typical tourist path.",
        why_choose: "Why Choose Us",
        local_expertise: "Local Expertise:",
        expertise_text: "Born and raised in Cape Town with deep local knowledge",
        personalized: "Personalized Experiences:",
        personalized_text: "Tailored tours to match your interests",
        sustainable: "Sustainable Tourism:",
        sustainable_text: "Supporting local communities and conservation",
        service: "5-Star Service:",
        service_text: "Dedicated to making your experience unforgettable",
        testimonials_title: "What Our Travelers Say",
        testimonials_subtitle: "Real experiences from our happy customers",
        testimonial1: "\"Our Table Mountain tour was the highlight of our South Africa trip. The guide's knowledge of the local flora and history made the experience truly special. We felt completely safe and cared for throughout the day.\"",
        testimonial2: "\"The Cape Peninsula tour exceeded all expectations! David was an exceptional guide who tailored the day to our interests. The scenery was breathtaking, and we learned so much about South Africa's history and culture.\"",
        testimonial3: "\"The Winelands tour was absolutely perfect. We visited three beautiful vineyards and enjoyed gourmet food pairings. The guide's knowledge of wines made the experience educational and fun!\"",
        from_usa: "From USA",
        from_germany: "From Germany",
        from_australia: "From Australia",
        april_2023: "April 15, 2023",
        june_2023: "June 2, 2023",
        march_2023: "March 22, 2023",
        table_mountain: "Table Mountain Tour",
        peninsula_tour: "Cape Peninsula Tour",
        winelands_tour: "Winelands Tour",
        popular_tours: "Popular Tours & Experiences",
        discover_tours: "Discover Cape Town through our curated experiences",
        peninsula_tour: "Cape Peninsula Tour",
        peninsula_desc: "Journey to the southernmost point of Africa with stunning coastal scenery. Visit Cape Point, Boulders Beach, and Chapman's Peak.",
        full_day: "Full Day",
        hours: "hours",
        per_person: "per person",
        peninsula_half: "Cape Peninsula Half Day",
        peninsula_half_desc: "Condensed version of our full peninsula tour. Visit highlights including Chapman's Peak and Hout Bay.",
        half_day: "Half Day",
        winelands_tour: "Winelands Luxury Tour",
        winelands_desc: "Discover the Cape Winelands with premium tastings and gourmet lunch at Stellenbosch, Franschhoek, and Paarl estates.",
        our_partners: "Our Trusted Partners",
        partner_subtitle: "Collaborating with the best to enhance your experience",
        aviator: "Aviator Airlines",
        aviator_desc: "Exclusive flight deals for our international travelers",
        safari_lodge: "Safari Lodge Group",
        safari_desc: "Premium accommodations near wildlife reserves",
        culinary: "Culinary Tours SA",
        culinary_desc: "Gourmet experiences showcasing local cuisine",
        wildlife: "Wildlife Photography Expeditions",
        wildlife_desc: "Guided photography tours for nature enthusiasts",
        gallery_title: "Cape Town Gallery",
        gallery_subtitle: "Explore the beauty of South Africa's Mother City",
        book_adventure: "Book Your Adventure",
        reserve_spot: "Reserve your spot on our most popular tours",
        select_tour: "Select Tour *",
        choose_tour: "Choose a tour",
        peninsula_full: "Cape Peninsula Tour (Full Day - R1,450)",
        tour_date: "Tour Date *",
        select_date: "Please select a date",
        participants: "Number of Participants *",
        select_number: "Select number",
        person: "person",
        people: "people",
        select_participants: "Please select number of participants",
        full_name: "Full Name *",
        enter_name: "Please enter your full name",
        email: "Email Address *",
        valid_email: "Please enter a valid email address",
        contact_us: "Contact Us",
        questions: "Have questions? Our team is here to help",
        subject: "Subject *",
        enter_subject: "Please enter a subject",
        message: "Message *",
        enter_message: "Please enter your message",
        send_message: "Send Message",
        quick_links: "Quick Links",
        popular_tours: "Popular Tours",
        contact_info: "Contact Info",
        footer_desc: "Creating unforgettable experiences in South Africa's most beautiful city through personalized tours and sustainable tourism.",
        all_rights: "All rights reserved.",
        designed: "Designed with",
        in_cape_town: "in Cape Town.",
        chat_title: "Chat with us",
        chat_welcome: "Hi there! ðŸ‘‹ Welcome to Cape Town Adventures. How can we help you today?",
        chat_help: "You can ask about tours, availability, prices, or anything else related to your Cape Town adventure!",
        select_tour_error: "Please select a tour",
        thank_you_message: "Thank you for your message! We will get back to you soon.",
        thank_you_booking: "Thank you for your booking! We have received your request and will confirm shortly."
    },
    fr: {
        language_name: "FranÃ§ais",
        home: "Accueil",
        about: "Ã€ propos",
        tours: "Circuits",
        testimonials: "TÃ©moignages",
      
      
        hero_title: "DÃ©couvrez Le Cap comme jamais auparavant",
        hero_subtitle: "Explorez la ville mÃ¨re avec des guides locaux passionnÃ©s et crÃ©ez des souvenirs inoubliables",
        explore_tours: "DÃ©couvrir les circuits",
        book_now: "RÃ©server maintenant",
        about_title: "Ã€ propos de Cape Town Adventures",
        about_subtitle: "Vos experts locaux en tourisme au Cap",
        our_story: "Notre histoire",
        story_text: "FondÃ©e en 2015 par des passionnÃ©s locaux, Cape Town Adventures est nÃ©e du dÃ©sir de partager la beautÃ© et la diversitÃ© de notre ville incroyable avec le monde. Nous croyons en un tourisme durable qui profite Ã  la fois aux visiteurs et aux communautÃ©s locales.",
        story_text2: "Avec plus de 8 ans d'expÃ©rience, notre Ã©quipe de guides certifiÃ©s connaÃ®t chaque recoin du Cap - de l'emblÃ©matique Table Mountain aux joyaux cachÃ©s que seuls les locaux connaissent. Nous nous engageons Ã  crÃ©er des expÃ©riences personnalisÃ©es qui vont au-delÃ  des sentiers touristiques habituels.",
        why_choose: "Pourquoi nous choisir",
        local_expertise: "Expertise locale:",
        expertise_text: "Grandi au Cap avec une connaissance approfondie de la rÃ©gion",
        personalized: "ExpÃ©riences personnalisÃ©es:",
        personalized_text: "Circuits sur mesure adaptÃ©s Ã  vos intÃ©rÃªts",
        sustainable: "Tourisme durable:",
        sustainable_text: "Soutien aux communautÃ©s locales et Ã  la conservation",
        service: "Service 5 Ã©toiles:",
        service_text: "DÃ©diÃ© Ã  rendre votre expÃ©rience inoubliable",
        testimonials_title: "Ce que disent nos voyageurs",
        testimonials_subtitle: "ExpÃ©riences rÃ©elles de nos clients satisfaits",
        testimonial1: "\"Notre visite de Table Mountain a Ã©tÃ© le point fort de notre voyage en Afrique du Sud. La connaissance de la flore et de l'histoire locales par le guide a rendu l'expÃ©rience vraiment spÃ©ciale. Nous nous sommes sentis complÃ¨tement en sÃ©curitÃ© et pris en charge tout au long de la journÃ©e.\"",
        testimonial2: "\"La visite de la pÃ©ninsule du Cap a dÃ©passÃ© toutes nos attentes ! David Ã©tait un guide exceptionnel qui a adaptÃ© la journÃ©e Ã  nos intÃ©rÃªts. Les paysages Ã©taient Ã  couper le souffle, et nous avons beaucoup appris sur l'histoire et la culture de l'Afrique du Sud.\"",
        testimonial3: "\"La visite des rÃ©gions viticoles Ã©tait absolument parfaite. Nous avons visitÃ© trois magnifiques vignobles et avons apprÃ©ciÃ© des accords mets-vins gastronomiques. La connaissance des vins par le guide a rendu l'expÃ©rience Ã  la fois Ã©ducative et amusante !\"",
        from_usa: "Des Ã‰tats-Unis",
        from_germany: "D'Allemagne",
        from_australia: "D'Australie",
        april_2023: "15 avril 2023",
        june_2023: "2 juin 2023",
        march_2023: "22 mars 2023",
        table_mountain: "Visite de Table Mountain",
        peninsula_tour: "Visite de la PÃ©ninsule du Cap",
        winelands_tour: "Visite des RÃ©gions Viticoles"
    },
    pt: {
        language_name: "PortuguÃªs",
        home: "InÃ­cio",
        about: "Sobre NÃ³s",
        tours: "Passeios",
        testimonials: "Depoimentos",
      
   
        hero_title: "Viva a Cidade do Cabo como Nunca Antes",
        hero_subtitle: "Descubra a Cidade MÃ£e com guias locais apaixonados e crie memÃ³rias inesquecÃ­veis",
        explore_tours: "Explorar Passeios",
        book_now: "Reservar Agora",
        about_title: "Sobre a Cape Town Adventures",
        about_subtitle: "Seus especialistas locais em turismo na Cidade do Cabo",
        our_story: "Nossa HistÃ³ria",
        story_text: "Fundada por locais apaixonados em 2015, a Cape Town Adventures nasceu do desejo de compartilhar a beleza e diversidade de nossa incrÃ­vel cidade com o mundo. Acreditamos em um turismo sustentÃ¡vel que beneficie tanto os visitantes quanto as comunidades locais.",
        story_text2: "Com mais de 8 anos de experiÃªncia, nossa equipe de guias certificados conhece cada canto da Cidade do Cabo - desde a icÃ´nica Table Mountain atÃ© joias escondidas que sÃ³ os locais conhecem. Estamos comprometidos em criar experiÃªncias personalizadas que vÃ£o alÃ©m do roteiro turÃ­stico tÃ­pico.",
        why_choose: "Por Que Nos Escolher",
        local_expertise: "Expertise Local:",
        expertise_text: "Nascidos e criados na Cidade do Cabo com profundo conhecimento local",
        personalized: "ExperiÃªncias Personalizadas:",
        personalized_text: "Passeios sob medida para atender seus interesses",
        sustainable: "Turismo SustentÃ¡vel:",
        sustainable_text: "Apoiando comunidades locais e conservaÃ§Ã£o",
        service: "ServiÃ§o 5 Estrelas:",
        service_text: "Dedicado a tornar sua experiÃªncia inesquecÃ­vel",
        testimonials_title: "O Que Nossos Viajantes Dizem",
        testimonials_subtitle: "ExperiÃªncias reais de nossos clientes felizes",
        testimonial1: "\"Nosso passeio pela Table Mountain foi o destaque de nossa viagem Ã  Ãfrica do Sul. O conhecimento do guia sobre a flora e histÃ³ria locais tornou a experiÃªncia verdadeiramente especial. NÃ³s nos sentimos completamente seguros e cuidados durante todo o dia.\"",
        testimonial2: "\"O passeio pela PenÃ­nsula do Cabo superou todas as expectativas! David foi um guia excepcional que adaptou o dia aos nossos interesses. A paisagem era deslumbrante e aprendemos muito sobre a histÃ³ria e cultura da Ãfrica do Sul.\"",
        testimonial3: "\"O passeio pelas regiÃµes vinÃ­colas foi absolutamente perfeito. Visitamos trÃªs vinÃ­colas lindas e apreciamos harmonizaÃ§Ãµes gastronÃ´micas. O conhecimento do guia sobre vinhos tornou a experiÃªncia educativa e divertida!\"",
        from_usa: "Dos EUA",
        from_germany: "Da Alemanha",
        from_australia: "Da AustrÃ¡lia",
        april_2023: "15 de abril de 2023",
        june_2023: "2 de junho de 2023",
        march_2023: "22 de marÃ§o de 2023",
        table_mountain: "Passeio pela Table Mountain",
        peninsula_tour: "Passeio pela PenÃ­nsula do Cabo",
        winelands_tour: "Passeio pelas RegiÃµes VinÃ­colas"
    }
};

// Current language
let currentLang = 'en';

// ====== MOBILE MENU TOGGLE ======
document.getElementById('menuToggle').addEventListener('click', function() {
    document.getElementById('mainNav').classList.toggle('active');
});

// ====== SMOOTH SCROLLING ======
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            window.scrollTo({
                top: target.offsetTop - 80,
                behavior: 'smooth'
            });
            
            // Close mobile menu if open
            document.getElementById('mainNav').classList.remove('active');
        }
    });
});

// ====== LIGHTBOX INITIALIZATION ======
lightbox.option({
    'resizeDuration': 200,
    'wrapAround': true,
    'albumLabel': 'Image %1 of %2'
});



// ====== SCROLL TO TOP BUTTON ======
const scrollTopButton = document.getElementById('scrollTop');

window.addEventListener('scroll', () => {
    if (window.pageYOffset > 300) {
        scrollTopButton.classList.add('active');
    } else {
        scrollTopButton.classList.remove('active');
    }
});

scrollTopButton.addEventListener('click', () => {
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
});

// ====== DATE AND TIME IN FOOTER ======
function updateDateTime() {
    const now = new Date();
    const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    const timeOptions = { hour: '2-digit', minute: '2-digit', second: '2-digit' };
    
    document.getElementById('currentDate').textContent = now.toLocaleDateString(currentLang, dateOptions);
    document.getElementById('currentTime').textContent = now.toLocaleTimeString(currentLang, timeOptions);
}

// Update date and time every second
updateDateTime();
setInterval(updateDateTime, 1000);

// ====== LANGUAGE SWITCHER ======
const languageBtn = document.getElementById('languageBtn');
const languageDropdown = document.getElementById('languageDropdown');

languageBtn.addEventListener('click', function(e) {
    e.stopPropagation();
    languageDropdown.classList.toggle('show');
});

// Close dropdown when clicking outside
document.addEventListener('click', function(e) {
    if (!languageBtn.contains(e.target) && !languageDropdown.contains(e.target)) {
        languageDropdown.classList.remove('show');
    }
});

// Language selection
document.querySelectorAll('.language-dropdown button').forEach(button => {
    button.addEventListener('click', function() {
        const lang = this.getAttribute('data-lang');
        changeLanguage(lang);
    });
});

// Function to change language
function changeLanguage(lang) {
    currentLang = lang;
    
    // Update button text
    const langName = translations[lang].language_name || lang.toUpperCase();
    languageBtn.innerHTML = `<i class="fas fa-globe"></i> ${langName}`;
    
    // Close dropdown
    languageDropdown.classList.remove('show');
    
    // Update all elements with data-translate attribute
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[lang] && translations[lang][key]) {
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                element.placeholder = translations[lang][key];
            } else if (element.tagName === 'OPTION') {
                element.textContent = translations[lang][key];
            } else {
                element.textContent = translations[lang][key];
            }
        } else {
            console.warn(`Missing translation: ${key} for ${lang}`);
        }
    });
    
    // Update date and time format
    updateDateTime();
}

// ====== CHAT WIDGET ======
const chatToggle = document.getElementById('chatToggle');
const chatWidget = document.getElementById('chatWidget');
const chatClose = document.getElementById('chatClose');
const chatSend = document.getElementById('chatSend');
const chatInput = document.getElementById('chatInput');
const chatBody = document.getElementById('chatBody');

chatToggle.addEventListener('click', function() {
    chatWidget.classList.toggle('open');
});

chatClose.addEventListener('click', function() {
    chatWidget.classList.remove('open');
});

function addMessage(text, isUser = false) {
    const messageDiv = document.createElement('div');
    messageDiv.classList.add('chat-message');
    messageDiv.classList.add(isUser ? 'user' : 'bot');
    messageDiv.textContent = text;
    chatBody.appendChild(messageDiv);
    
    // Scroll to bottom
    chatBody.scrollTop = chatBody.scrollHeight;
}

chatSend.addEventListener('click', function() {
    const message = chatInput.value.trim();
    if (message) {
        addMessage(message, true);
        chatInput.value = '';
        
        // Simulate bot response after a delay
        setTimeout(() => {
            const responses = [
                translations[currentLang].thank_you_message,
                "We've received your question and will respond as soon as possible.",
                "For immediate assistance, you can call us at +27 21 123 4567"
            ];
            
            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
            addMessage(randomResponse);
        }, 1000);
    }
});

// Send message on Enter key
chatInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        chatSend.click();
    }
});

// ====== COOKIE CONSENT ======
const cookieConsent = document.getElementById('cookieConsent');
const acceptCookies = document.getElementById('acceptCookies');
const declineCookies = document.getElementById('declineCookies');

// Check if user has already made a choice
if (!localStorage.getItem('cookieChoice')) {
    // Show the banner after a delay
    setTimeout(() => {
        cookieConsent.classList.add('show');
    }, 2000);
}

acceptCookies.addEventListener('click', function() {
    localStorage.setItem('cookieChoice', 'accepted');
    cookieConsent.classList.remove('show');
});

declineCookies.addEventListener('click', function() {
    localStorage.setItem('cookieChoice', 'declined');
    cookieConsent.classList.remove('show');
});
